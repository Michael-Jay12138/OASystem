<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Bootstrap 2 Form Builder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="assets/css/lib/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/lib/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="assets/css/custom.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
</head>

<body>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="#">表单制作页面</a>
        </div>
    </div>
</div>
<div class="container">
    <div class="row clearfix">
        <!-- Building Form. -->
        <div class="span6">
            <div class="clearfix">
                <h2>标题 <a class="btn btn-success" onclick="getContent()" style="float: right"><h4>保存表单</h4></a></h2>

                <hr>
                <div id="build">
                    <form id="target" class="form-horizontal">
                    </form>
                </div>
            </div>
        </div>
        <!-- / Building Form. -->

        <!-- Components -->
        <div class="span6">
            <h2>拖放控件</h2>
            <hr>
            <div class="tabbable">
                <ul class="nav nav-tabs" id="formtabs">
                    <!-- Tab nav -->
                </ul>
                <form class="form-horizontal" id="components">
                    <fieldset>
                        <div class="tab-content">
                            <!-- Tabs of snippets go here -->
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
        <!-- / Components -->

    </div>


</div> <!-- /container -->

<script data-main="assets/js/main-built.js" src="assets/js/lib/require.js"></script>
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-13083321-13', 'minikomi.github.io');
    ga('send', 'pageview');
    window.onload=function(){
        $.get('../../FormTemp/GetFormFile').then(function (result) {
            $("#render").val(result);
            // var start=result.indexOf("div")-1;
            // var end=result.lastIndexOf("div")+4;
            // var appendHtml=result.substring(start,end);
            // console.log(appendHtml);
            document.getElementById("target").children[0].children[0].insertAdjacentHTML('afterend',result);
        })
    }

    function getContent() {
        var form=$("#render").val();
        $.post('../../FormTemp/formHtml2htmlFile', {formHtml:form}).then(function (result) {
            console.log(result);
            alert("保存成功");
            window.close();
        });
    }
</script>
</body>
</html>
